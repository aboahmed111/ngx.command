{"version":3,"sources":["command.directive.ts"],"names":[],"mappings":";;;;;;;;;;;IAcA;;;;;;;;;;OAUG;IAIH;QASC,0BACS,QAAkB,EAClB,OAAmB;YADnB,aAAQ,GAAR,QAAQ,CAAU;YAClB,YAAO,GAAP,OAAO,CAAY;YARnB,mBAAc,GAAkC,EAAE,iBAAiB,EAAE,WAAW,EAAE,CAAC;QAU5F,CAAC;QAED,mCAAQ,GAAR;YAAA,iBAiBC;YAhBA,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;YAExC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBACnB,MAAM,IAAI,KAAK,CAAC,+CAA+C,CAAC,CAAC;YAClE,CAAC;YAED,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW;iBAC1C,EAAE,CAAC,UAAA,CAAC;gBACJ,OAAO,CAAC,GAAG,CAAC,iCAAiC,EAAE,CAAC,CAAC,CAAC;gBAClD,KAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;YACtB,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;YAChB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY;iBAC5C,EAAE,CAAC,UAAA,CAAC;gBACJ,OAAO,CAAC,GAAG,CAAC,kCAAkC,EAAE,CAAC,CAAC,CAAC;gBACnD,KAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,KAAI,CAAC,OAAO,CAAC,aAAa,EAAE,KAAI,CAAC,cAAc,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;YACrG,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;QACjB,CAAC;QAGD,kCAAO,GAAP;YACC,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;YAC3C,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC;QAED,sCAAW,GAAX;YACC,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;YAC3C,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACvB,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;YAChC,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;QAClC,CAAC;QA3CD;YAAC,YAAK,EAAE;;yDAAA;QACR;YAAC,YAAK,EAAE;;gEAAA;QACR;YAAC,kBAAW,CAAC,UAAU,CAAC;;4DAAA;QA8BxB;YAAC,mBAAY,CAAC,OAAO,CAAC;;;;uDAAA;QArCvB;YAAC,gBAAS,CAAC;gBACV,QAAQ,EAAE,WAAW;aACrB,CAAC;;4BAAA;QA+CF,uBAAC;IAAD,CA9CA,AA8CC,IAAA;IA9CY,wBAAgB,mBA8C5B,CAAA","file":"command.directive.js","sourcesContent":["import {\r\n\tDirective,\r\n\tOnInit,\r\n\tOnDestroy,\r\n\tInput,\r\n\tHostBinding,\r\n\tHostListener,\r\n\tRenderer,\r\n\tElementRef\r\n} from \"@angular/core\";\r\nimport {Subscription} from \"rxjs/Subscription\";\r\n\r\nimport {ICommand} from \"./command\";\r\n\r\n/**\r\n *\r\n * ### Example with options\r\n * ```html\r\n * <button [command]=\"saveCmd\" [commandOptions]=\"{executingCssClass: 'in-progress'}\">Save</button>\r\n * ```\r\n * @export\r\n * @class CommandDirective\r\n * @implements {OnInit}\r\n * @implements {OnDestroy}\r\n */\r\n@Directive({\r\n\tselector: \"[command]\",\r\n})\r\nexport class CommandDirective implements OnInit, OnDestroy {\r\n\r\n\t@Input() command: ICommand;\r\n\t@Input() commandOptions: { executingCssClass: string } = { executingCssClass: \"executing\" };\r\n\t@HostBinding(\"disabled\") isDisabled: boolean;\r\n\r\n\tprivate canExecute$$: Subscription;\r\n\tprivate isExecuting$$: Subscription;\r\n\r\n\tconstructor(\r\n\t\tprivate renderer: Renderer,\r\n\t\tprivate element: ElementRef\r\n\t) {\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tconsole.log(\"[commandDirective::init]\");\r\n\r\n\t\tif (!this.command) {\r\n\t\t\tthrow new Error(\"[commandDirective] command should be defined!\");\r\n\t\t}\r\n\r\n\t\tthis.canExecute$$ = this.command.canExecute$\r\n\t\t\t.do(x => {\r\n\t\t\t\tconsole.log(\"[commandDirective::canExecute$]\", x);\r\n\t\t\t\tthis.isDisabled = !x;\r\n\t\t\t}).subscribe();\r\n\t\tthis.isExecuting$$ = this.command.isExecuting$\r\n\t\t\t.do(x => {\r\n\t\t\t\tconsole.log(\"[commandDirective::isExecuting$]\", x);\r\n\t\t\t\tthis.renderer.setElementClass(this.element.nativeElement, this.commandOptions.executingCssClass, x);\r\n\t\t\t}).subscribe();\r\n\t}\r\n\r\n\t@HostListener(\"click\")\r\n\tonClick() {\r\n\t\tconsole.log(\"[commandDirective::onClick]\");\r\n\t\tthis.command.execute();\r\n\t}\r\n\r\n\tngOnDestroy() {\r\n\t\tconsole.log(\"[commandDirective::destroy]\");\r\n\t\tthis.command.destroy();\r\n\t\tthis.canExecute$$.unsubscribe();\r\n\t\tthis.isExecuting$$.unsubscribe();\r\n\t}\r\n}"]}