{"version":3,"sources":["command.directive.ts"],"names":[],"mappings":";;;;;;;;;;;;;;IAgBA;;;;;;;;;;OAUG;IAIH;QASC,0BACiC,MAAsB,EAC9C,QAAkB,EAClB,OAAmB;YAFK,WAAM,GAAN,MAAM,CAAgB;YAC9C,aAAQ,GAAR,QAAQ,CAAU;YAClB,YAAO,GAAP,OAAO,CAAY;QAG5B,CAAC;QAED,mCAAQ,GAAR;YAAA,iBAkBC;YAjBA,2CAA2C;YAC3C,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;YAE1E,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBACnB,MAAM,IAAI,KAAK,CAAC,+CAA+C,CAAC,CAAC;YAClE,CAAC;YAED,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW;iBAC1C,EAAE,CAAC,UAAA,CAAC;gBACJ,qDAAqD;gBACrD,KAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;YACtB,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;YAChB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY;iBAC5C,EAAE,CAAC,UAAA,CAAC;gBACJ,sDAAsD;gBACtD,KAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,KAAI,CAAC,OAAO,CAAC,aAAa,EAAE,KAAI,CAAC,cAAc,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;YACrG,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC;QACjB,CAAC;QAGD,kCAAO,GAAP;YACC,8CAA8C;YAC9C,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QACxB,CAAC;QAED,sCAAW,GAAX;YACC,8CAA8C;YAC9C,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACvB,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,CAAC;YAChC,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;QAClC,CAAC;QA9CD;YAAC,YAAK,EAAE;;yDAAA;QACR;YAAC,YAAK,EAAE;;gEAAA;QACR;YAAC,kBAAW,CAAC,UAAU,CAAC;;4DAAA;QAiCxB;YAAC,mBAAY,CAAC,OAAO,CAAC;;;;uDAAA;QAxCvB;YAAC,gBAAS,CAAC;gBACV,QAAQ,EAAE,WAAW;aACrB,CAAC;uBAWC,aAAM,CAAC,uBAAc,CAAC;;4BAXvB;QAkDF,uBAAC;IAAD,CAjDA,AAiDC,IAAA;IAjDY,wBAAgB,mBAiD5B,CAAA","file":"command.directive.js","sourcesContent":["import {\r\n\tDirective,\r\n\tOnInit,\r\n\tOnDestroy,\r\n\tInput,\r\n\tHostBinding,\r\n\tHostListener,\r\n\tRenderer,\r\n\tElementRef,\r\n\tInject\r\n} from \"@angular/core\";\r\nimport { Subscription } from \"rxjs/Subscription\";\r\n\r\nimport { CommandOptions, COMMAND_CONFIG } from \"./config\";\r\nimport { ICommand } from \"./command\";\r\n\r\n/**\r\n *\r\n * ### Example with options\r\n * ```html\r\n * <button [command]=\"saveCmd\" [commandOptions]=\"{executingCssClass: 'in-progress'}\">Save</button>\r\n * ```\r\n * @export\r\n * @class CommandDirective\r\n * @implements {OnInit}\r\n * @implements {OnDestroy}\r\n */\r\n@Directive({\r\n\tselector: \"[command]\",\r\n})\r\nexport class CommandDirective implements OnInit, OnDestroy {\r\n\r\n\t@Input() command: ICommand;\r\n\t@Input() commandOptions: CommandOptions;\r\n\t@HostBinding(\"disabled\") isDisabled: boolean;\r\n\r\n\tprivate canExecute$$: Subscription;\r\n\tprivate isExecuting$$: Subscription;\r\n\r\n\tconstructor(\r\n\t\t@Inject(COMMAND_CONFIG) private config: CommandOptions,\r\n\t\tprivate renderer: Renderer,\r\n\t\tprivate element: ElementRef\r\n\t) {\r\n\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\t// console.log(\"[commandDirective::init]\");\r\n\t\tthis.commandOptions = Object.assign({}, this.config, this.commandOptions);\r\n\r\n\t\tif (!this.command) {\r\n\t\t\tthrow new Error(\"[commandDirective] command should be defined!\");\r\n\t\t}\r\n\r\n\t\tthis.canExecute$$ = this.command.canExecute$\r\n\t\t\t.do(x => {\r\n\t\t\t\t// console.log(\"[commandDirective::canExecute$]\", x);\r\n\t\t\t\tthis.isDisabled = !x;\r\n\t\t\t}).subscribe();\r\n\t\tthis.isExecuting$$ = this.command.isExecuting$\r\n\t\t\t.do(x => {\r\n\t\t\t\t// console.log(\"[commandDirective::isExecuting$]\", x);\r\n\t\t\t\tthis.renderer.setElementClass(this.element.nativeElement, this.commandOptions.executingCssClass, x);\r\n\t\t\t}).subscribe();\r\n\t}\r\n\r\n\t@HostListener(\"click\")\r\n\tonClick() {\r\n\t\t// console.log(\"[commandDirective::onClick]\");\r\n\t\tthis.command.execute();\r\n\t}\r\n\r\n\tngOnDestroy() {\r\n\t\t// console.log(\"[commandDirective::destroy]\");\r\n\t\tthis.command.destroy();\r\n\t\tthis.canExecute$$.unsubscribe();\r\n\t\tthis.isExecuting$$.unsubscribe();\r\n\t}\r\n}"]}